{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,UAEa,CACXC,KAAMC,SAASC,cAAc,WAG1BF,KAAKG,iBAAiB,UAE3B,SAAwBC,GACtBA,EAAIC,iBACJ,MAAMC,MAAEA,EAAKC,KAAEA,EAAIC,OAAEA,GAKvB,SAAyBR,GACvB,MAAMS,EAAW,IAAIC,SAASV,GAExBW,EAAa,GAKnB,OAJAF,EAASG,SAAQ,CAACC,EAAOC,KACvBH,EAAWG,GAAQC,OAAOF,MAGrBF,EAbyBK,CAAgBZ,EAAIa,gBA8BtD,SAA2BC,EAAa,IAC/BA,EAAWC,KAAI,EAAGC,SAAAC,EAAUf,MAAAgB,KAWrC,SAAuBF,EAAUd,GAC/B,MAAMiB,EAAgBC,KAAKC,SAAW,GAEtC,OAAQC,QAAU,IAAIC,SAAQ,CAACC,EAASC,KACtCC,YAAW,KACLP,EACFK,EAAQ,C,SAAER,E,MAAUd,IAEpBuB,EAAO,C,SAAET,E,MAAUd,MAEpBA,MApBHyB,CAAcV,EAAUC,GACrBU,MAAK,EAACZ,SAAEA,EAAQd,MAAEA,MACjBR,EAAAmC,OAAOC,QAAQ,qBAAqBd,QAAed,UAEpD6B,OAAM,EAACf,SAAEA,EAAQd,MAAEA,MAClBR,EAAAmC,OAAOG,QAAQ,oBAAoBhB,QAAed,YAnCxD+B,CAcF,SAA8B/B,EAAOC,EAAMC,GACzC,MAAM8B,EAAqB,GAE3B,IAAK,IAAIC,EAAI,EAAGA,EAAI/B,EAAQ+B,GAAK,EAAG,CAClC,MAAMC,EAAelC,EAAQiC,EAAIhC,EAC3BkC,EAAwB,GAC9BA,EAAsBrB,SAAWmB,EAAI,EACrCE,EAAsBnC,MAAQkC,EAC9BF,EAAmBI,KAAKD,GAG1B,OAAOH,EA1ByBK,CAAqBrC,EAAOC,EAAMC","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst refs = {\n  form: document.querySelector('.form'),\n};\n\nrefs.form.addEventListener('submit', createPromises);\n\nfunction createPromises(evt) {\n  evt.preventDefault();\n  const { delay, step, amount } = getDataFromForm(evt.currentTarget);\n  const dataArrayForEachPromise = calculatePromiseData(delay, step, amount);\n  createAllPromises(dataArrayForEachPromise);\n}\n\nfunction getDataFromForm(form) {\n  const formData = new FormData(form);\n\n  const dataObject = {};\n  formData.forEach((value, name) => {\n    dataObject[name] = Number(value);\n  });\n\n  return dataObject;\n}\n\nfunction calculatePromiseData(delay, step, amount) {\n  const dataArrayForCreate = [];\n\n  for (let i = 0; i < amount; i += 1) {\n    const delayForEach = delay + i * step;\n    const dataObjForEachPromise = {};\n    dataObjForEachPromise.position = i + 1;\n    dataObjForEachPromise.delay = delayForEach;\n    dataArrayForCreate.push(dataObjForEachPromise);\n  }\n\n  return dataArrayForCreate;\n}\n\nfunction createAllPromises(arrayOfObj = []) {\n  return arrayOfObj.map(({ position, delay }) =>\n    createPromise(position, delay)\n      .then(({ position, delay }) => {\n        Notify.success(`Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        Notify.failure(`Rejected promise ${position} in ${delay}ms`);\n      })\n  );\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  return (promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  }));\n}\n"],"names":["$iQIUW","parcelRequire","form","document","querySelector","addEventListener","evt","preventDefault","delay","step","amount","formData","FormData","dataObject","forEach","value","name","Number","$47d4ff9957288465$var$getDataFromForm","currentTarget","arrayOfObj","map","position","position1","delay1","shouldResolve","Math","random","promise","Promise","resolve","reject","setTimeout","$47d4ff9957288465$var$createPromise","then","Notify","success","catch","failure","$47d4ff9957288465$var$createAllPromises","dataArrayForCreate","i","delayForEach","dataObjForEachPromise","push","$47d4ff9957288465$var$calculatePromiseData"],"version":3,"file":"03-promises.c9ebcad5.js.map"}